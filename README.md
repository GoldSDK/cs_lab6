# C# Лабораторная работа №6
**Горбунов Глеб, ИТ-11**

## Кот мяукает
Создайте сущность Кот, которая описывается следующим образом:
+ Имеет Имя (строка)
+ Для создания необходимо указать имя кота.
+ Может быть приведен к текстовой форме вида: “кот: Имя”
+ Может помяукать, что приводит к выводу на экран следующего текста: “Имя: мяу!”,
вызвать мяуканье можно без параметров.
Может помяукать N раз, что приводит к выводу на экран следующего текста: “Имя: мяу-
мяу-…-мяу!”, где количество “мяу” равно N.
Создайте кота по имени “Барсик”, и затем пусть он помяукает сначала один раз, а затем три раза.
### Интерфейс Мяуканье.
Разработайте метод, который принимает набор объектов способных мяукать и вызывает мяуканье у
каждого объекта. Мяукающие объекты должны иметь метод со следующей сигнатурой:
public void meow();
Дополните решение предыдущей задачи так, чтобы иметь возможность передать Кота в написанный
вами метод и протестируйте работоспособность решения передав в него нескольких котов, а также
создайте любой другой произвольный класс и передайте в написанный метод его объекты.
### Количество мяуканий.
Необходимо воспользоваться классом Кот и методом принимающим всех мяукающих из предыдущего
задания. Необходимо таким образом передать кота в указанный метод, что бы после окончания его
работы узнать сколько раз мяукал кот за время его работы. Перед
вызовом метода создаем кота, отправляем ссылку на кота в метод, после окончания его работы
выводим количество мяуканий на экран. Кота изменять нельзя.

## Дроби
Создайте сущность Дробь со следующими особенностями:
+ Имеет числитель: целое число
+ Имеет знаменатель: целое число
+ Дробь может быть создана с указанием числителя и знаменателя
+ Может вернуть строковое представление вида “числитель/знаменатель”
+ Может выполнять операции сложения, вычитания, умножения и деления с другой
Дробью или целым числом. Результатом операции должна быть новая Дробь (таким
образом, обе исходные дроби не изменяются) (Обязательно использовать перегрузки!)
+ Необходимо корректно обрабатывать отрицательные значения. Учтите, что знаменатель не
может быть отрицательным.
Затем необходимо выполнить следующие задачи:
1. Создать несколько экземпляров дробей.
2. Написать по одному примеру использования каждого метода.
3. Вывести на экран примеры и результаты их выполнения в формате «1/3 * 2/3 = 2/9»
4. Посчитать f1.sum(f2).div(f3).minus(5)
### Сравнение дробей.
Переопределите метод сравнения объектов по состоянию таким образом, чтобы две дроби
считались одинаковыми тогда, когда у них одинаковые значения числителя и знаменателя.
### Клонирование дроби. Интерфейс ICloneable.
Переопределите метод клонирования, таким образом, чтобы при его вызове возвращался новый
объект Дроби, значения полей которого будут копиями оригинальной Дроби.

В класс Дробь, добавить интерфейс на два метода: получение вещественного значения, установка
числителя и установка знаменателя.

Сгенерировать такую версию дроби, которая будет кэшировать вычисление вещественного
значения.

## файлы
- `Cat.cs` – класс кота
- `IMeowable.cs` – интерфейс для мяукающих объектов
- `MeowingObject.cs` – другой мяукающий объект
- `CatWithCounter.cs` – декоратор для подсчета мяуканий
- `Meowsh.cs` – вспомогательный класс для работы с мяукающими объектами
- `Fraction.cs` – класс дроби
- `IFractionoperations.cs` – интерфейс для работы с дробью
- `Cache.cs` – декоратор для кэширования значения дроби
- `Program.cs` – основная программа с демонстрацией

## алгоритм работы

### cat.cs
- `Cat(string name)` – конструктор проверяет, что имя не пустое, и сохраняет его.
- `ToString()` – возвращает строку в формате "кот: имя".
- `Meow()` – выводит в консоль сообщение с мяуканием.
- `Meow(int count)` – выводит серию мяуканий через дефис; проверяет, что count > 0.

```
кот: Барсик
Барсик: мяу!
Барсик: мяу-мяу-мяу!
```

### imeowable.cs
- `Meow()` – интерфейсный метод для издания мяукающего звука.

### meowingobject.cs
- `MeowingObject(string name)` – конструктор проверяет название объекта.
- `ToString()` – возвращает строку с названием объекта.
- `Meow()` – выводит в консоль мяукающий звук объекта.

```
Объект: игрушка
Объект: Собака
игрушка: мяяяууу!
Собака: мяяяууу!
```

### catwithcounter.cs
- `CatWithCounter(Cat cat)` – конструктор принимает объект кота, проверяет на null.
- `Meow()` – вызывает meow у исходного кота и увеличивает счетчик.
- `ToString()` – возвращает строку с именем кота и количеством мяуканий.

```
Мурзик: мяу!
телевизор: мяяяууу!
выполнено 2 мяуканий в целом

Мурзик мяукал 1 раз
Мурзик: мяу!
Мурзик: мяу!
Мурзик: мяу!
Мурзик: мяу!
Мурзик мяукнул 5 раз
```

### meowhelper.cs
- `MakeAllMeow(IEnumerable<imeowable> MeowingObjects)` – для каждого объекта в коллекции вызывает метод meow, подсчитывает общее количество вызовов и генерирует событие meowingcompleted.
- `OnDone(int meowCount)` – вызывает событие meowingcompleted, если на него есть подписчики.

```
=== несколько вызовов ===
Мурзик: мяу!
Мурзик: мяу!
Мурзик: мяу!
выполнено 3 мяуканий в целом
после 3 вызовов кот Мурзик мяукал 3 раз
```

### fraction.cs
- `Fraction(int numerator, int denominator)` – конструктор проверяет знаменатель на 0, нормализует знак и сокращает дробь.
- `normalize()` – сокращает дробь с помощью нод.
- `GetGCD(int a, int b)` – вычисляет нод алгоритмом евклида.
- `ToString()` – возвращает строку в формате "числитель/знаменатель".
- `Add(Fraction other)` – складывает две дроби.
- `Add(int number)` – складывает дробь с целым числом.
- `Subtract(fraction other)` – вычитает дробь из другой.
- `Subtract(int number)` – вычитает целое число из дроби.
- `Multiply(fraction other)` – умножает дроби.
- `Multiply(int number)` – умножает дробь на целое число.
- `Divide(fraction other)` – делит дробь на другую, проверяет деление на ноль.
- `Divide(int number)` – делит дробь на целое число, проверяет деление на ноль.
- перегрузки операторов `+`, `-`, `*`, `/` – вызывают соответствующие методы.
- `Clone()` – создает копию объекта дроби.
- `GetReal()` – возвращает вещественное значение, используя кэш.
- `SetNumerator(int numerator)` – устанавливает числитель и инвалидирует кэш.
- `SetDenominator(int denominator)` – устанавливает знаменатель через свойство, инвалидирует кэш.
- `Equals(Fraction other)` – сравнивает две дроби по значениям числителя и знаменателя.

```
f1 = 1/3
f2 = 2/3
f3 = 3/4
f4 = -1/2
f5 = -1/2

1/3 + 2/3 = 1/1
2/3 - 1/3 = 1/3
1/3 * 2/3 = 2/9
2/3 / 1/3 = 2/1
1/3 + 2 = 7/3
1/3 - 1 = -2/3
1/3 * 3 = 1/1
1/3 / 2 = 1/6

f1 + f2 = 1/1
f1 - f2 = -1/3
f1 * f2 = 2/9
f1 / f2 = 1/2
f1 + 5 = 16/3
3 * f1 = 1/1

калькуляция f1.sum(f2).div(f3).minus(5)
((1/3 + 2/3) / 3/4) - 5 = -11/3

сравнение:
f6 = 1/2, f7 = 1/2
f6.Equals(f7): True
f6 == f7 (по ссылке): False

клонирование:
оригинал: 3/5
клон: 3/5
original.Equals(cloned): True
original == cloned (по ссылке): False
```

### ifractionoperations.cs
- `GetReal()` – возвращает вещественное значение дроби.
- `SetNumerator(int numerator)` – устанавливает числитель.
- `SetDenominator(int denominator)` – устанавливает знаменатель.

```
f1 = 1/3
f1: 0.3333333333333333
```

### cachedfraction.cs
- `Cached(IFractionOperations fraction)` – конструктор сохраняет исходную дробь.
- `GetReal()` – возвращает значение из кэша, если оно актуально, иначе вычисляет и кэширует.
- `SetNumerator(int numerator)` – делегирует установку числителя и инвалидирует кэш.
- `SetDenominator(int denominator)` – делегирует установку знаменателя и инвалидирует кэш.
- `ToString()` – делегирует вызов исходной дроби.

```
кэширование:
1вое получение значения 1/3: 0.3333333333333333
изменена дробь на: 2/3
2рое получение значения 2/3: 0.3333333333333333
3тье получение значения (из кэша): 0.3333333333333333
```

## использованные паттерны
- **декоратор** – `catwithcounter` добавляет подсчет мяуканий, `cachedfraction` добавляет кэширование.
- **интерфейсы** – `imeowable` и `ifractionoperations` определяют контракты для объектов.

## обработка ошибок
- проверка входных параметров (имя, количество мяуканий, знаменатель дроби).
- обработка исключений в конструкторах и методах.
- защита от null в декораторах и вспомогательных методах.


```
кот с пустым именем:
кот не может быть безымянным

мяуканье с неверным параметром:
я не думаю что кот может мяукнуть отрицательное кол-во раз

шаблон с null котом:
кот не может быть null
```
